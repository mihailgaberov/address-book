var abApp=angular.module("address-book",["LocalStorageModule"]);abApp.config(["localStorageServiceProvider",function(t){t.setPrefix("address-book")}]),abApp.run(["CountryListFactory",function(t){var e=require("country-list")();t.setCountryList(e)}]),angular.module("address-book").factory("CountryListFactory",[function(){"use strict";var t={},e=function(e){t=e},r=function(){return t.getData()},o=function(e){return t.getName(e)};return{getCountryList:r,setCountryList:e,getNameByCode:o}}]),angular.module("address-book").factory("ResultEntryFactory",["localStorageService","$rootScope",function(t,e){"use strict";var r=t.get("index"),o=function(o){t.isSupported&&(r||t.set("index",r=1),o.id=r,t.set("entry:"+r,o),t.set("index",++r),e.$broadcast("entryAdded",o))},n=function(){var e=t.length();if(e-1){var r,o=[],n=t.keys();for(r=0;r<n.length;r++)/entry.\d+/.test(n[r])&&o.push(t.get(n[r]))}return o};return{addEntry:o,getAllEntries:n}}]),angular.module("address-book").factory("UiFactory",[function(){"use strict";var t=function(t){console.log(">>> add entry",t);var e,r,o=document.createElement("tr");for(r in t)t.hasOwnProperty(r)&&(e=document.createElement("td"),e.appendChild(document.createTextNode(t[r])),o.appendChild(e));e=document.createElement("td"),e.innerHTML='<a data-op="edit" data-id="'+t.id+'">Edit</a> | <a data-op="delete" data-id="'+t.id+'">Delete</a>',o.appendChild(e),o.setAttribute("id","address-book-entry-"+t.id),document.querySelectorAll("#address-book-table")[0].appendChild(o)},e=function(t){console.log(">>> show all records: ",t),console.log(document.querySelectorAll("#address-book-table"))};return{addEntryToUI:t,showAll:e}}]),angular.module("address-book").controller("FormController",["$scope","CountryListFactory","ResultEntryFactory",function(t,e,r){this.countriesData=e.getCountryList(),this.submitForm=function(){var o={firstName:t.firstName,lastName:t.lastName,email:t.email,country:e.getNameByCode(t.country)};0===t.recordId.value?r.addEntry(o):console.log(">>>>> edit")}}]).directive("addressBookForm",function(){return{controller:"FormController",controllerAs:"fc",restrict:"E",scope:{},templateUrl:"views/form/address-book-form.html",link:function(t,e,r,o){t.countries=o.countriesData}}}),angular.module("address-book").controller("ResultsController",["$scope","$rootScope","UiFactory","ResultEntryFactory",function(t,e,r,o){r.showAll(o.getAllEntries()),e.$on("entryAdded",function(t,e){r.addEntryToUI(e)})}]).directive("results",function(){return{restrict:"E",scope:{},templateUrl:"views/results/results.html"}});